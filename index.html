<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TK-Auto - 프랑크푸르트 한인 정비소</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* 로딩 스피너 스타일 */
        .spinner {
            display: none;
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #09f;
            animation: spin 1s ease infinite;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .overlay {
            display: none;
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: rgba(255, 255, 255, 0.8);
            z-index: 1000;
        }

        .overlay.active {
            display: block;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">TK-Auto</div>
            <ul>
                <li><a href="#home">홈</a></li>
                <li><a href="#services">서비스</a></li>
                <li><a href="#booking">예약</a></li>
                <li><a href="#contact">연락처</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home" class="hero">
            <h1>TK-Auto 프랑크푸르트 한인 정비소</h1>
            <p>프랑크푸르트에서 최고의 한국어 자동차 정비 서비스를 제공합니다.</p>
        </section>

        <section id="services">
            <h2>서비스</h2>
            <div class="service-grid">
                <div class="service-item">
                    <h3>정기 점검</h3>
                    <p>차량의 안전과 성능을 위한 정기적인 점검 서비스</p>
                </div>
                <div class="service-item">
                    <h3>엔진 수리</h3>
                    <p>전문적인 엔진 진단 및 수리 서비스</p>
                </div>
                <div class="service-item">
                    <h3>타이어 교체</h3>
                    <p>최적의 타이어 추천 및 교체 서비스</p>
                </div>
            </div>
        </section>

        <section id="booking">
            <h2>예약</h2>
            <div class="calendly-inline-widget" data-url="https://calendly.com/hansonjang/30min" style="min-width:320px;height:630px;"></div>
            <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
        </section>

        <section id="contact">
            <h2>연락처</h2>
            <div class="contact-info">
                <p>주소: [프랑크푸르트 주소]</p>
                <p>전화: [전화번호]</p>
                <p>이메일: jerhyun@gmail.com</p>
            </div>
            <form id="contact-form" action="https://formsubmit.co/jerhyun@gmail.com" method="POST">
                <input type="hidden" name="_next" value="https://boisterous-torte-59f371.netlify.app/thanks.html"> <!-- Netlify Pages URL로 변경 -->
                <input type="hidden" name="_subject" value="TK-Auto 새로운 문의">
                <input type="hidden" name="_captcha" value="false">
                <input type="text" name="name" placeholder="이름" required>
                <input type="email" name="email" placeholder="이메일" required>
                <textarea name="message" placeholder="메시지" required></textarea>
                <button type="submit">보내기</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 TK-Auto. All rights reserved.</p>
    </footer>

    <div class="overlay" id="loading-overlay">
        <div class="spinner" id="spinner"></div>
    </div>

    <script>
        document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault(); // 폼 제출 기본 동작 방지

            // 로딩 오버레이 표시
            document.getElementById('loading-overlay').classList.add('active');

            var form = event.target;
            var data = new FormData(form);

            fetch(form.action, {
                method: form.method,
                body: data,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    return response.json(); // JSON 응답 처리
                } else {
                    throw new Error('Network response was not ok.');
                }
            }).then(data => {
                // 로딩 오버레이 숨기기
                document.getElementById('loading-overlay').classList.remove('active');
                window.location.href = 'https://boisterous-torte-59f371.netlify.app/thanks.html'; // Netlify Pages URL로 변경
            }).catch(error => {
                // 로딩 오버레이 숨기기
                document.getElementById('loading-overlay').classList.remove('active');

                console.error('Error:', error);
                alert('메시지 전송에 실패했습니다. 다시 시도해주세요.');
            });
        });
    </script>
</body>
</html>
